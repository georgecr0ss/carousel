(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

module.exports = {
    sceneTransition: 1,
    sceneDuration: 2.5
};

},{}],2:[function(require,module,exports){
'use strict';

var Carousel = require('./carousel/carousel');
var Scene = require('./carousel/scene');

window.onload = function () {
	var bgImage = 'https://i.ytimg.com/vi/J6g53Hm0rq4/maxresdefault.jpg';
	var CarouselEl = new Carousel('scene', bgImage);

	var sceneOneBG = 'http://www.bentleymotors.com/content/dam/bentley/Master/Models/Hero/PAST%20MODELS/ContinentalSprSprts_Hero_1920x670.jpg/_jcr_content/renditions/cq5dam.web.1280.1280.jpeg.image_file.1116.389.file/cq5dam.web.1280.1280.jpg';
	var sceneTwoBG = 'https://i.kinja-img.com/gawker-media/image/upload/s--qp2F6uPK--/c_scale,fl_progressive,q_80,w_800/im4ymrlztv9j1befkpoa.jpg';
	var screenThreeBG = 'http://www.supercars.net/blog/wp-content/uploads/2016/05/1990-Ferrari-F40-4.jpg';
	var screenFourBG = 'http://wowslider.com/sliders/demo-77/data1/images/field175959_1920.jpg';
	var screenFiveBG = 'http://wowslider.com/sliders/demo-77/data1/images/idaho239691_1920.jpg';

	var scene = new Scene(sceneOneBG, "#aaf0ff");
	var scene2 = new Scene(sceneTwoBG, "#ffff00");
	var scene3 = new Scene(screenThreeBG, "#f0fff0");
	var scene4 = new Scene(screenFourBG, "#f0aaf0");
	var scene5 = new Scene(screenFiveBG, "#f0ffaa");

	CarouselEl.addElements([scene, scene2, scene3, scene4, scene5]);
};

},{"./carousel/carousel":3,"./carousel/scene":4}],3:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var carouselEmitter = require('../utils/events');

var Carousel = function Carousel(parent, bgImage) {
	this.carousel = document.createElement('div');
	this.carousel.id = 'carousel';

	this.elements = [];
	this.image = new Image();

	this.loopIndex = 0;
	this.loopIndexCorrection = 0;

	this.arrowState = false;
	this.playCarousel = new TimelineMax();

	var grandParent = document.getElementById(parent);
	grandParent.appendChild(this.carousel);

	carouselEmitter.on('update', this.animation.bind(this));

	this.createArrows();
	this.image.onload = function () {}.bind(this);
	this.image.src = bgImage;
	return this;
};

Carousel.prototype.addElements = function (array) {
	var type = (typeof array === 'undefined' ? 'undefined' : _typeof(array)) === 'object';

	if (type) {
		var self = this;
		array.map(function (el) {
			if ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object') {
				self.appendElement(el.element);
			}

			self.elements.push(el);
		});
	} else {
		this.elements.push(array);
	}
	this.initScene();
	return this;
};

Carousel.prototype.log = function (array) {
	console.warn(7777777);
};

Carousel.prototype.curretnElement = function (customeIndex) {
	var index = customeIndex !== undefined ? getCustomIndex.call(this, customeIndex) : updateIndex.call(this);

	function getCustomIndex(passedIndex) {
		return passedIndex % this.elements.length;
	}

	function updateIndex() {
		this.loopIndex = this.loopIndex % this.elements.length;

		return this.loopIndex;
	}

	return this.elements[index];
};

Carousel.prototype.nextElement = function () {
	console.error(this.loopIndex);
	this.loopIndex++;
	return this.curretnElement();
};

Carousel.prototype.prevElement = function () {
	this.loopIndex += this.elements.length - 1;

	return this.curretnElement();
};

Carousel.prototype.createArrows = function () {
	this.leftArrow = document.createElement('div');
	this.rightArrow = document.createElement('div');

	this.leftArrow.id = 'leftArrow';
	this.rightArrow.id = 'rightArrow';

	this.leftArrow.className = 'arrows';
	this.rightArrow.className = 'arrows';

	this.appendElement(this.leftArrow);
	this.appendElement(this.rightArrow);

	this.arrows = document.getElementsByClassName('arrows');

	this.leftArrow.removeEventListener("click", this.playNextElement.bind(this, true));
	this.rightArrow.removeEventListener("click", this.playPrevElement.bind(this));

	this.carousel.addEventListener('mouseover', this.arrowsState.bind(this, true));
	this.carousel.addEventListener('mouseout', this.arrowsState.bind(this, false));
};

Carousel.prototype.hidePosition = function () {
	var carouselBounds = this.carousel.getBoundingClientRect();
	return carouselBounds.width;
};

Carousel.prototype.arrowsState = function (state) {
	switch (state) {
		case true:
			this.arrows[0].style.display = 'inline';
			this.arrows[1].style.display = 'inline';
			break;
		case false:
			this.arrows[0].style.display = 'none';
			this.arrows[1].style.display = 'none';
			break;
		default:
			break;
	}
};

Carousel.prototype.appendElement = function (child) {
	this.child = child;
	this.carousel.appendChild(this.child);
};

Carousel.prototype.eventEmmiter = function (subject, event, callback) {
	this.subject = subject;
	this.event = event;
	this.callback = callback;

	this.subject.addEventListener(this.event, this.callback);
};

Carousel.prototype.animation = function () {
	console.warn(this.nextElement());
	this.nextAnimationElement = this.nextElement();
	this.nextAnimationElement.controls().play();
};

Carousel.prototype.initScene = function () {
	var position = this.hidePosition();
	this.currentAnimationElement = this.curretnElement();

	this.currentAnimationElement.controls().play();
};

Carousel.prototype.playNextElement = function (tween) {
	var current = this.curretnElement().element;
	var next = this.nextElement().element;
	var nextElPos = this.hidePosition();
	var tweenNextElement = new TimelineMax();

	tweenNextElement.set(next, { left: nextElPos }).to(current, 1, { left: -nextElPos, ease: Power2.easeOut }).to(next, 1, { left: 0, ease: Power2.easeOut }, '-=1');
};

Carousel.prototype.playPrevElement = function () {
	var current = this.curretnElement().element;
	var prev = this.prevElement().element;
	var currPos = this.hidePosition();
	var tweenPrevElement = new TimelineMax();

	tweenPrevElement.set(prev, { left: -currPos, ease: Power2.easeOut }).to(current, 0.6, { left: currPos, ease: Power2.easeOut }).to(prev, 0.6, { left: 0, ease: Power2.easeOut });
};

module.exports = Carousel;

},{"../utils/events":5}],4:[function(require,module,exports){
'use strict';

var config = require('../../config');
var carouselEmitter = require('../utils/events');

console.warn(carouselEmitter);

var Scene = function Scene(image, color) {

	this.element = document.createElement('div');
	this.newImage = new Image();

	this.element.className = 'carouselScene';
	this.image = image;

	this.startPosition;
	this.hidePosition;
	this.shoulPause = false;
	this.position = 0;
	this.tween = new TimelineMax({ paused: true, onStart: function () {
			this.setPosition();
		}.bind(this) });

	this.element.style.backgroundImage = "url('./pictures/preloader_gear.gif')";

	this.newImage.onload = function () {
		this.element.style.backgroundImage = "url('" + this.newImage.src + "')";
		this.element.style.backgroundColor = color;

		TweenMax.from(this.element, 0.5, { autoAlpha: 0, ease: Circ.easeOut });
	}.bind(this);

	this.newImage.src = this.image;

	return this;
};

Scene.prototype.sceneTransition = function (position) {
	this.tween.set(this.element, { left: position.width }).to(this.element, 1, { left: 0, ease: Power1.easeOut, onComplete: function onComplete() {
			console.warn('zcxxzcxzc');
		} }).to(this.element, 1, { left: -position.width, ease: Power1.easeOut, onStart: function onStart() {
			carouselEmitter.emit('update');
		}, onComplete: function () {
			console.warn('almost finish');
			this.controls().kill.call(this);
		}.bind(this) }, '+=2.5');
};

Scene.prototype.setPosition = function () {
	this.elBoundings = document.getElementById('carousel').getBoundingClientRect();

	return this.position = {
		right: this.elBoundings.right,
		width: this.elBoundings.width
	};
};

Scene.prototype.controls = function () {
	return {
		play: function () {
			this.sceneTransition(this.setPosition());
			this.tween.play();
		}.bind(this),
		pause: function pause() {},
		kill: function kill() {
			this.tween.kill();
		}
	};
};

module.exports = Scene;

},{"../../config":1,"../utils/events":5}],5:[function(require,module,exports){
"use strict";

var Emitter = function Emitter() {
    this.events = {};
};

Emitter.prototype.on = function (type, listener) {
    this.events[type] = this.events[type] || [];
    this.events[type].push(listener);
};

Emitter.prototype.emit = function (type) {
    if (this.events[type]) {
        this.events[type].forEach(function (listener) {
            listener();
        });
    }
};

var carouselEmitter = new Emitter();
module.exports = carouselEmitter;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvY29uZmlnLmpzIiwicHVibGljL2pzL2FwcC5qcyIsInB1YmxpYy9qcy9jYXJvdXNlbC9jYXJvdXNlbC5qcyIsInB1YmxpYy9qcy9jYXJvdXNlbC9zY2VuZS5qcyIsInB1YmxpYy9qcy91dGlscy9ldmVudHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sT0FBUCxHQUFpQjtBQUNiLHFCQUFpQixDQURKO0FBRWIsbUJBQWU7QUFGRixDQUFqQjs7Ozs7QUNBQSxJQUFJLFdBQVcsUUFBUSxxQkFBUixDQUFmO0FBQ0EsSUFBSSxRQUFRLFFBQVEsa0JBQVIsQ0FBWjs7QUFFQSxPQUFPLE1BQVAsR0FBZ0IsWUFBWTtBQUMzQixLQUFJLFVBQVUsc0RBQWQ7QUFDQSxLQUFJLGFBQWEsSUFBSSxRQUFKLENBQWEsT0FBYixFQUFzQixPQUF0QixDQUFqQjs7QUFFQSxLQUFJLGFBQWEsNk5BQWpCO0FBQ0EsS0FBSSxhQUFhLDRIQUFqQjtBQUNBLEtBQUksZ0JBQWdCLGlGQUFwQjtBQUNBLEtBQUksZUFBZSx3RUFBbkI7QUFDQSxLQUFJLGVBQWUsd0VBQW5COztBQUVBLEtBQUksUUFBUSxJQUFJLEtBQUosQ0FBVSxVQUFWLEVBQXFCLFNBQXJCLENBQVo7QUFDQSxLQUFJLFNBQVMsSUFBSSxLQUFKLENBQVUsVUFBVixFQUFzQixTQUF0QixDQUFiO0FBQ0EsS0FBSSxTQUFTLElBQUksS0FBSixDQUFVLGFBQVYsRUFBeUIsU0FBekIsQ0FBYjtBQUNBLEtBQUksU0FBUyxJQUFJLEtBQUosQ0FBVSxZQUFWLEVBQXdCLFNBQXhCLENBQWI7QUFDQSxLQUFJLFNBQVMsSUFBSSxLQUFKLENBQVUsWUFBVixFQUF3QixTQUF4QixDQUFiOztBQUVBLFlBQVcsV0FBWCxDQUF1QixDQUFDLEtBQUQsRUFBTyxNQUFQLEVBQWMsTUFBZCxFQUFxQixNQUFyQixFQUE0QixNQUE1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bnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBzY2VuZVRyYW5zaXRpb246IDEsXG4gICAgc2NlbmVEdXJhdGlvbjogMi41XG59IiwidmFyIENhcm91c2VsID0gcmVxdWlyZSgnLi9jYXJvdXNlbC9jYXJvdXNlbCcpO1xyXG52YXIgU2NlbmUgPSByZXF1aXJlKCcuL2Nhcm91c2VsL3NjZW5lJyk7XHJcblxyXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG5cdHZhciBiZ0ltYWdlID0gJ2h0dHBzOi8vaS55dGltZy5jb20vdmkvSjZnNTNIbTBycTQvbWF4cmVzZGVmYXVsdC5qcGcnO1xyXG5cdHZhciBDYXJvdXNlbEVsID0gbmV3IENhcm91c2VsKCdzY2VuZScsIGJnSW1hZ2UpO1xyXG5cclxuXHR2YXIgc2NlbmVPbmVCRyA9ICdodHRwOi8vd3d3LmJlbnRsZXltb3RvcnMuY29tL2NvbnRlbnQvZGFtL2JlbnRsZXkvTWFzdGVyL01vZGVscy9IZXJvL1BBU1QlMjBNT0RFTFMvQ29udGluZW50YWxTcHJTcHJ0c19IZXJvXzE5MjB4NjcwLmpwZy9famNyX2NvbnRlbnQvcmVuZGl0aW9ucy9jcTVkYW0ud2ViLjEyODAuMTI4MC5qcGVnLmltYWdlX2ZpbGUuMTExNi4zODkuZmlsZS9jcTVkYW0ud2ViLjEyODAuMTI4MC5qcGcnO1xyXG5cdHZhciBzY2VuZVR3b0JHID0gJ2h0dHBzOi8vaS5raW5qYS1pbWcuY29tL2dhd2tlci1tZWRpYS9pbWFnZS91cGxvYWQvcy0tcXAyRjZ1UEstLS9jX3NjYWxlLGZsX3Byb2dyZXNzaXZlLHFfODAsd184MDAvaW00eW1ybHp0djlqMWJlZmtwb2EuanBnJztcclxuXHR2YXIgc2NyZWVuVGhyZWVCRyA9ICdodHRwOi8vd3d3LnN1cGVyY2Fycy5uZXQvYmxvZy93cC1jb250ZW50L3VwbG9hZHMvMjAxNi8wNS8xOTkwLUZlcnJhcmktRjQwLTQuanBnJztcclxuXHR2YXIgc2NyZWVuRm91ckJHID0gJ2h0dHA6Ly93b3dzbGlkZXIuY29tL3NsaWRlcnMvZGVtby03Ny9kYXRhMS9pbWFnZXMvZmllbGQxNzU5NTlfMTkyMC5qcGcnO1xyXG5cdHZhciBzY3JlZW5GaXZlQkcgPSAnaHR0cDovL3dvd3NsaWRlci5jb20vc2xpZGVycy9kZW1vLTc3L2RhdGExL2ltYWdlcy9pZGFobzIzOTY5MV8xOTIwLmpwZyc7XHJcblxyXG5cdHZhciBzY2VuZSA9IG5ldyBTY2VuZShzY2VuZU9uZUJHLFwiI2FhZjBmZlwiKTtcclxuXHR2YXIgc2NlbmUyID0gbmV3IFNjZW5lKHNjZW5lVHdvQkcsIFwiI2ZmZmYwMFwiKTtcclxuXHR2YXIgc2NlbmUzID0gbmV3IFNjZW5lKHNjcmVlblRocmVlQkcsIFwiI2YwZmZmMFwiKTtcclxuXHR2YXIgc2NlbmU0ID0gbmV3IFNjZW5lKHNjcmVlbkZvdXJCRywgXCIjZjBhYWYwXCIpO1xyXG5cdHZhciBzY2VuZTUgPSBuZXcgU2NlbmUoc2NyZWVuRml2ZUJHLCBcIiNmMGZmYWFcIik7XHJcblxyXG5cdENhcm91c2VsRWwuYWRkRWxlbWVudHMoW3NjZW5lLHNjZW5lMixzY2VuZTMsc2NlbmU0LHNjZW5lNV0pO1xyXG5cclxufVxyXG4iLCJ2YXIgY2Fyb3VzZWxFbWl0dGVyID0gcmVxdWlyZSgnLi4vdXRpbHMvZXZlbnRzJyk7XG5cbnZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uKHBhcmVudCwgYmdJbWFnZSkge1xuXHR0aGlzLmNhcm91c2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdHRoaXMuY2Fyb3VzZWwuaWQgPSAnY2Fyb3VzZWwnO1xuXG5cdHRoaXMuZWxlbWVudHMgPSBbXTtcblx0dGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG5cdHRoaXMubG9vcEluZGV4ID0gMDtcblx0dGhpcy5sb29wSW5kZXhDb3JyZWN0aW9uID0gMDtcblxuXHR0aGlzLmFycm93U3RhdGUgPSBmYWxzZTtcblx0dGhpcy5wbGF5Q2Fyb3VzZWwgPSBuZXcgVGltZWxpbmVNYXgoKTtcblxuXHR2YXIgZ3JhbmRQYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnQpO1xuXHRncmFuZFBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNhcm91c2VsKTtcblxuXHRjYXJvdXNlbEVtaXR0ZXIub24oJ3VwZGF0ZScsIHRoaXMuYW5pbWF0aW9uLmJpbmQodGhpcykpO1xuXG5cdHRoaXMuY3JlYXRlQXJyb3dzKCk7XG5cdHRoaXMuaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKXtcblxuXHR9LmJpbmQodGhpcyk7XG5cdHRoaXMuaW1hZ2Uuc3JjID0gYmdJbWFnZTtcblx0cmV0dXJuIHRoaXM7XG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUuYWRkRWxlbWVudHMgPSBmdW5jdGlvbihhcnJheSkge1xuXHR2YXIgdHlwZSA9IHR5cGVvZiBhcnJheSA9PT0gJ29iamVjdCc7XG5cblx0aWYodHlwZSkge1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRhcnJheS5tYXAoZnVuY3Rpb24oZWwpIHtcblx0XHRcdGlmKHR5cGVvZiBlbCA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0c2VsZi5hcHBlbmRFbGVtZW50KGVsLmVsZW1lbnQpXG5cdFx0XHR9XG5cblx0XHRcdHNlbGYuZWxlbWVudHMucHVzaChlbCk7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5lbGVtZW50cy5wdXNoKGFycmF5KTtcblx0fVxuXHR0aGlzLmluaXRTY2VuZSgpO1xuXHRyZXR1cm4gdGhpcztcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbihhcnJheSkge1xuXHRjb25zb2xlLndhcm4oNzc3Nzc3Nyk7XG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUuY3VycmV0bkVsZW1lbnQgPSBmdW5jdGlvbihjdXN0b21lSW5kZXgpIHtcblx0dmFyIGluZGV4ID0gIGN1c3RvbWVJbmRleCAhPT0gdW5kZWZpbmVkID8gZ2V0Q3VzdG9tSW5kZXguY2FsbCh0aGlzLCBjdXN0b21lSW5kZXgpIDogdXBkYXRlSW5kZXguY2FsbCh0aGlzKTtcblxuXHRmdW5jdGlvbiBnZXRDdXN0b21JbmRleChwYXNzZWRJbmRleCkge1xuXHRcdHJldHVybiBwYXNzZWRJbmRleCAlIHRoaXMuZWxlbWVudHMubGVuZ3RoO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlSW5kZXgoKSB7XG5cdFx0dGhpcy5sb29wSW5kZXggPSAodGhpcy5sb29wSW5kZXgpICUgdGhpcy5lbGVtZW50cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5sb29wSW5kZXg7XG5cdH1cblxuXHRyZXR1cm4gdGhpcy5lbGVtZW50c1sgaW5kZXggXTtcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5uZXh0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuXHRjb25zb2xlLmVycm9yKHRoaXMubG9vcEluZGV4KTtcblx0dGhpcy5sb29wSW5kZXgrKztcblx0cmV0dXJuIHRoaXMuY3VycmV0bkVsZW1lbnQoKTtcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5wcmV2RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLmxvb3BJbmRleCArPSB0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDE7XG5cblx0cmV0dXJuIHRoaXMuY3VycmV0bkVsZW1lbnQoKTtcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5jcmVhdGVBcnJvd3MgPSBmdW5jdGlvbigpIHtcblx0dGhpcy5sZWZ0QXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0dGhpcy5yaWdodEFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cblx0dGhpcy5sZWZ0QXJyb3cuaWQgPSAnbGVmdEFycm93Jztcblx0dGhpcy5yaWdodEFycm93LmlkID0gJ3JpZ2h0QXJyb3cnO1xuXG5cdHRoaXMubGVmdEFycm93LmNsYXNzTmFtZSA9ICdhcnJvd3MnO1xuXHR0aGlzLnJpZ2h0QXJyb3cuY2xhc3NOYW1lID0gJ2Fycm93cyc7XG5cblx0dGhpcy5hcHBlbmRFbGVtZW50KHRoaXMubGVmdEFycm93KTtcblx0dGhpcy5hcHBlbmRFbGVtZW50KHRoaXMucmlnaHRBcnJvdyk7XG5cblx0dGhpcy5hcnJvd3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcnJvd3MnKTtcblxuXG5cdHRoaXMubGVmdEFycm93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnBsYXlOZXh0RWxlbWVudC5iaW5kKHRoaXMsIHRydWUpKVxuXHR0aGlzLnJpZ2h0QXJyb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucGxheVByZXZFbGVtZW50LmJpbmQodGhpcykpXG5cblx0dGhpcy5jYXJvdXNlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLmFycm93c1N0YXRlLmJpbmQodGhpcywgdHJ1ZSkpO1xuXHR0aGlzLmNhcm91c2VsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5hcnJvd3NTdGF0ZS5iaW5kKHRoaXMsIGZhbHNlKSk7XG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUuaGlkZVBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG5cdHZhciBjYXJvdXNlbEJvdW5kcyA9IHRoaXMuY2Fyb3VzZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblx0cmV0dXJuIGNhcm91c2VsQm91bmRzLndpZHRoO1xufTtcblxuQ2Fyb3VzZWwucHJvdG90eXBlLmFycm93c1N0YXRlID0gZnVuY3Rpb24oc3RhdGUpIHtcblx0c3dpdGNoIChzdGF0ZSkge1xuXHRcdGNhc2UgdHJ1ZTpcblx0XHRcdHRoaXMuYXJyb3dzWzBdLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcblx0XHRcdHRoaXMuYXJyb3dzWzFdLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgZmFsc2U6XG5cdFx0XHR0aGlzLmFycm93c1swXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0dGhpcy5hcnJvd3NbMV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRicmVhaztcblx0fVxufTtcblxuQ2Fyb3VzZWwucHJvdG90eXBlLmFwcGVuZEVsZW1lbnQgPSBmdW5jdGlvbihjaGlsZCkge1xuXHR0aGlzLmNoaWxkID0gY2hpbGQ7XG5cdHRoaXMuY2Fyb3VzZWwuYXBwZW5kQ2hpbGQodGhpcy5jaGlsZCk7XG59O1xuXG5cbkNhcm91c2VsLnByb3RvdHlwZS5ldmVudEVtbWl0ZXIgPSBmdW5jdGlvbihzdWJqZWN0LCBldmVudCwgY2FsbGJhY2spIHtcblx0dGhpcy5zdWJqZWN0ID0gc3ViamVjdDtcblx0dGhpcy5ldmVudCA9IGV2ZW50O1xuXHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cblx0dGhpcy5zdWJqZWN0LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudCwgdGhpcy5jYWxsYmFjayk7XG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUuYW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdGNvbnNvbGUud2Fybih0aGlzLm5leHRFbGVtZW50KCkpO1xuXHR0aGlzLm5leHRBbmltYXRpb25FbGVtZW50ID0gdGhpcy5uZXh0RWxlbWVudCgpO1xuXHR0aGlzLm5leHRBbmltYXRpb25FbGVtZW50LmNvbnRyb2xzKCkucGxheSgpXG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUuaW5pdFNjZW5lID0gZnVuY3Rpb24oKSB7XG5cdHZhciBwb3NpdGlvbiA9IHRoaXMuaGlkZVBvc2l0aW9uKCk7XG5cdHRoaXMuY3VycmVudEFuaW1hdGlvbkVsZW1lbnQgPSB0aGlzLmN1cnJldG5FbGVtZW50KCk7XG5cblx0dGhpcy5jdXJyZW50QW5pbWF0aW9uRWxlbWVudC5jb250cm9scygpLnBsYXkoKTtcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5wbGF5TmV4dEVsZW1lbnQgPSBmdW5jdGlvbih0d2Vlbikge1xuXHR2YXIgY3VycmVudCA9IHRoaXMuY3VycmV0bkVsZW1lbnQoKS5lbGVtZW50O1xuXHR2YXIgbmV4dCA9IHRoaXMubmV4dEVsZW1lbnQoKS5lbGVtZW50O1xuXHR2YXIgbmV4dEVsUG9zID0gdGhpcy5oaWRlUG9zaXRpb24oKTtcblx0dmFyIHR3ZWVuTmV4dEVsZW1lbnQgPSBuZXcgVGltZWxpbmVNYXgoKTtcblxuXHR0d2Vlbk5leHRFbGVtZW50XG5cdFx0LnNldChuZXh0LCB7bGVmdDogbmV4dEVsUG9zfSlcblx0XHQudG8oY3VycmVudCwgMSwge2xlZnQ6IC1uZXh0RWxQb3MsIGVhc2U6IFBvd2VyMi5lYXNlT3V0fSlcblx0XHQudG8obmV4dCwgMSwge2xlZnQ6IDAsIGVhc2U6IFBvd2VyMi5lYXNlT3V0fSwgJy09MScpXG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUucGxheVByZXZFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG5cdHZhciBjdXJyZW50ID0gdGhpcy5jdXJyZXRuRWxlbWVudCgpLmVsZW1lbnQ7XG5cdHZhciBwcmV2ID0gdGhpcy5wcmV2RWxlbWVudCgpLmVsZW1lbnQ7XG5cdHZhciBjdXJyUG9zID0gdGhpcy5oaWRlUG9zaXRpb24oKTtcblx0dmFyIHR3ZWVuUHJldkVsZW1lbnQgPSBuZXcgVGltZWxpbmVNYXgoKTtcblxuXHR0d2VlblByZXZFbGVtZW50XG5cdFx0LnNldChwcmV2LCB7bGVmdDogLWN1cnJQb3MsIGVhc2U6IFBvd2VyMi5lYXNlT3V0fSlcblx0XHQudG8oY3VycmVudCwgMC42LCB7bGVmdDogY3VyclBvcywgZWFzZTogUG93ZXIyLmVhc2VPdXR9KVxuXHRcdC50byhwcmV2LCAwLjYsIHtsZWZ0OiAwLCBlYXNlOiBQb3dlcjIuZWFzZU91dH0pXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhcm91c2VsO1xuIiwidmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uLy4uL2NvbmZpZycpO1xudmFyIGNhcm91c2VsRW1pdHRlciA9IHJlcXVpcmUoJy4uL3V0aWxzL2V2ZW50cycpO1xuXG5jb25zb2xlLndhcm4oY2Fyb3VzZWxFbWl0dGVyKTtcblxuXG52YXIgU2NlbmUgPSBmdW5jdGlvbihpbWFnZSwgY29sb3IpIHtcblxuXHR0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0dGhpcy5uZXdJbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG5cdHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSAnY2Fyb3VzZWxTY2VuZSc7XG5cdHRoaXMuaW1hZ2UgPSBpbWFnZTtcblxuXHR0aGlzLnN0YXJ0UG9zaXRpb247XG5cdHRoaXMuaGlkZVBvc2l0aW9uO1xuXHR0aGlzLnNob3VsUGF1c2UgPSBmYWxzZTtcblx0dGhpcy5wb3NpdGlvbiA9IDA7XG5cdHRoaXMudHdlZW4gPSBuZXcgVGltZWxpbmVNYXgoe3BhdXNlZDogdHJ1ZSwgb25TdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zZXRQb3NpdGlvbigpO1xuXHR9LmJpbmQodGhpcyl9KTtcblxuXHR0aGlzLmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJy4vcGljdHVyZXMvcHJlbG9hZGVyX2dlYXIuZ2lmJylcIjtcblxuXHR0aGlzLm5ld0ltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIgKyB0aGlzLm5ld0ltYWdlLnNyYyArIFwiJylcIjtcblx0XHR0aGlzLmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG5cblx0XHRUd2Vlbk1heC5mcm9tKHRoaXMuZWxlbWVudCwgMC41LHthdXRvQWxwaGE6IDAsIGVhc2U6IENpcmMuZWFzZU91dH0pXG5cdH0uYmluZCh0aGlzKTtcblxuXHR0aGlzLm5ld0ltYWdlLnNyYyA9IHRoaXMuaW1hZ2U7XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5TY2VuZS5wcm90b3R5cGUuc2NlbmVUcmFuc2l0aW9uID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcblx0XHR0aGlzLnR3ZWVuXG5cdFx0XHQuc2V0KHRoaXMuZWxlbWVudCwge2xlZnQ6IHBvc2l0aW9uLndpZHRofSlcblx0XHRcdC50byh0aGlzLmVsZW1lbnQsIDEsIHtsZWZ0OiAwLCBlYXNlOiBQb3dlcjEuZWFzZU91dCwgb25Db21wbGV0ZTpmdW5jdGlvbigpIHtjb25zb2xlLndhcm4oJ3pjeHh6Y3h6YycpO30gfSlcblx0XHRcdC50byh0aGlzLmVsZW1lbnQsIDEsIHtsZWZ0OiAgLXBvc2l0aW9uLndpZHRoLCBlYXNlOiBQb3dlcjEuZWFzZU91dCwgb25TdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNhcm91c2VsRW1pdHRlci5lbWl0KCd1cGRhdGUnKVxuXHRcdFx0fSwgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCdhbG1vc3QgZmluaXNoJyk7XG5cdFx0XHRcdFx0dGhpcy5jb250cm9scygpLmtpbGwuY2FsbCh0aGlzKTtcblx0XHRcdH0uYmluZCh0aGlzKX0sICcrPTIuNScpXG59O1xuXG5TY2VuZS5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcblx0dGhpcy5lbEJvdW5kaW5ncyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJvdXNlbCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdHJldHVybiB0aGlzLnBvc2l0aW9uID0ge1xuXHRcdHJpZ2h0OiB0aGlzLmVsQm91bmRpbmdzLnJpZ2h0LFxuXHRcdHdpZHRoOiB0aGlzLmVsQm91bmRpbmdzLndpZHRoXG5cdH07XG59O1xuXG5TY2VuZS5wcm90b3R5cGUuY29udHJvbHMgPSBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHtcblx0XHRwbGF5OiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc2NlbmVUcmFuc2l0aW9uKHRoaXMuc2V0UG9zaXRpb24oKSk7XG5cdFx0XHR0aGlzLnR3ZWVuLnBsYXkoKTtcblx0XHR9LmJpbmQodGhpcyksXG5cdFx0cGF1c2U6IGZ1bmN0aW9uKCkge1xuXG5cdFx0fSxcblx0XHRraWxsOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMudHdlZW4ua2lsbCgpO1xuXHRcdH1cblx0fTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2NlbmU7IiwidmFyIEVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5ldmVudHMgPSB7fTtcbn07XG5cbkVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICB0aGlzLmV2ZW50c1t0eXBlXSA9IHRoaXMuZXZlbnRzW3R5cGVdIHx8IFtdO1xuICAgIHRoaXMuZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xufVxuXG5FbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICAgIGlmICh0aGlzLmV2ZW50c1t0eXBlXSkge1xuICAgICAgICB0aGlzLmV2ZW50c1t0eXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbnZhciBjYXJvdXNlbEVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xubW9kdWxlLmV4cG9ydHMgPSBjYXJvdXNlbEVtaXR0ZXI7XG4iXX0=
