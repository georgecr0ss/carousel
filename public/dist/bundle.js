(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

module.exports = {
    sceneTransition: 1,
    sceneDuration: 2.5
};

},{}],2:[function(require,module,exports){
'use strict';

window.onload = function () {
	var Carousel = require('./carousel/carousel');
	var Scene = require('./carousel/scene');

	var bgImage = 'https://i.ytimg.com/vi/J6g53Hm0rq4/maxresdefault.jpg';
	var CarouselEl = new Carousel('scene', bgImage);

	var sceneOneBG = 'http://www.bentleymotors.com/content/dam/bentley/Master/Models/Hero/PAST%20MODELS/ContinentalSprSprts_Hero_1920x670.jpg/_jcr_content/renditions/cq5dam.web.1280.1280.jpeg.image_file.1116.389.file/cq5dam.web.1280.1280.jpg';
	var sceneTwoBG = 'https://i.kinja-img.com/gawker-media/image/upload/s--qp2F6uPK--/c_scale,fl_progressive,q_80,w_800/im4ymrlztv9j1befkpoa.jpg';
	var screenThreeBG = 'http://www.supercars.net/blog/wp-content/uploads/2016/05/1990-Ferrari-F40-4.jpg';
	var screenFourBG = 'http://wowslider.com/sliders/demo-77/data1/images/field175959_1920.jpg';
	var screenFiveBG = 'http://wowslider.com/sliders/demo-77/data1/images/idaho239691_1920.jpg';

	var scene = new Scene(sceneOneBG, "#aa00ff");
	var scene2 = new Scene(sceneTwoBG, "#ffff00");
	var scene3 = new Scene(screenThreeBG, "#f0fff0");
	var scene4 = new Scene(screenFourBG, "#f0aaf0");
	var scene5 = new Scene(screenFiveBG, "#f0ffaa");

	CarouselEl.addElements([scene, scene2, scene3, scene4, scene5]);
};

},{"./carousel/carousel":3,"./carousel/scene":4}],3:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var Carousel = function Carousel(parent, bgImage) {
	this.carousel = document.createElement('div');
	this.carousel.id = 'carousel';

	this.elements = [];
	this.image = new Image();

	this.loopIndex = 0;
	this.loopIndexCorrection = 0;

	this.arrowState = false;
	this.playCarousel = new TimelineMax();

	var grandParent = document.getElementById(parent);
	grandParent.appendChild(this.carousel);

	this.createArrows();
	this.image.onload = function () {}.bind(this);
	this.image.src = bgImage;

	return this;
};

Carousel.prototype.addElements = function (array) {
	var type = (typeof array === 'undefined' ? 'undefined' : _typeof(array)) === 'object';

	if (type) {
		var self = this;
		array.map(function (el) {
			if ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object') {
				self.appendElement(el.element);
			}

			self.elements.push(el);
		});
	} else {
		this.elements.push(array);
	}
	this.initScene();
	return this;
};

Carousel.prototype.curretnElement = function (customeIndex) {
	var index = customeIndex !== undefined ? getCustomIndex.call(this, customeIndex) : updateIndex.call(this);

	function getCustomIndex(passedIndex) {
		return passedIndex % this.elements.length;
	}

	function updateIndex() {
		this.loopIndex = this.loopIndex % this.elements.length;

		return this.loopIndex;
	}

	return this.elements[index];
};

Carousel.prototype.nextElement = function () {
	console.error(this.loopIndex);
	this.loopIndex++;
	return this.curretnElement();
};

Carousel.prototype.prevElement = function () {
	this.loopIndex += this.elements.length - 1;

	return this.curretnElement();
};

// Carousel.prototype.removeElements = function(array) {
// 	if(type) {
// 		array.map(function(el, i) {
// 			this.carousel.removeChild(el)
// 			this.elements.splice(i, 1);
// 		});
// 	} else {
// 		this.elements.push(array);
// 	}

// 	return this.elements;
// }

Carousel.prototype.createArrows = function () {
	this.leftArrow = document.createElement('div');
	this.rightArrow = document.createElement('div');

	this.leftArrow.id = 'leftArrow';
	this.rightArrow.id = 'rightArrow';

	this.leftArrow.className = 'arrows';
	this.rightArrow.className = 'arrows';

	this.appendElement(this.leftArrow);
	this.appendElement(this.rightArrow);

	this.arrows = document.getElementsByClassName('arrows');

	this.leftArrow.removeEventListener("click", this.playNextElement.bind(this, true));
	this.rightArrow.removeEventListener("click", this.playPrevElement.bind(this));

	this.carousel.addEventListener('mouseover', this.arrowsState.bind(this, true));
	this.carousel.addEventListener('mouseout', this.arrowsState.bind(this, false));
};

Carousel.prototype.hidePosition = function () {
	var carouselBounds = this.carousel.getBoundingClientRect();
	return carouselBounds.width;
};

Carousel.prototype.arrowsState = function (state) {
	switch (state) {
		case true:
			this.arrows[0].style.display = 'inline';
			this.arrows[1].style.display = 'inline';
			break;
		case false:
			this.arrows[0].style.display = 'none';
			this.arrows[1].style.display = 'none';
			break;
		default:
			break;
	}
};

Carousel.prototype.appendElement = function (child) {
	this.child = child;
	this.carousel.appendChild(this.child);
};

Carousel.prototype.eventEmmiter = function (subject, event, callback) {
	this.subject = subject;
	this.event = event;
	this.callback = callback;

	this.subject.addEventListener(this.event, this.callback);
};

Carousel.prototype.animation = function () {
	this.nextAnimationElement = this.nextElement();
	this.nextAnimationElement.controls().play(this.animation.bind(this));
};

Carousel.prototype.initScene = function () {
	var position = this.hidePosition();
	this.currentAnimationElement = this.curretnElement();
	function cb() {
		console.warn('play next scene');
	}
	this.currentAnimationElement.controls().play(this.animation.bind(this));
};

Carousel.prototype.playNextElement = function (tween) {
	var current = this.curretnElement().element;
	var next = this.nextElement().element;
	var nextElPos = this.hidePosition();
	var tweenNextElement = new TimelineMax();

	tweenNextElement.set(next, { left: nextElPos }).to(current, 1, { left: -nextElPos, ease: Power2.easeOut }).to(next, 1, { left: 0, ease: Power2.easeOut }, '-=1');
};

Carousel.prototype.playPrevElement = function () {
	var current = this.curretnElement().element;
	var prev = this.prevElement().element;
	var currPos = this.hidePosition();
	var tweenPrevElement = new TimelineMax();

	tweenPrevElement.set(prev, { left: -currPos, ease: Power2.easeOut }).to(current, 0.6, { left: currPos, ease: Power2.easeOut }).to(prev, 0.6, { left: 0, ease: Power2.easeOut });
};

module.exports = Carousel;

},{}],4:[function(require,module,exports){
'use strict';

var config = require('../../config');

var Scene = function Scene(image, color) {

	this.element = document.createElement('div');
	this.newImage = new Image();

	this.element.className = 'carouselScene';
	this.image = image;

	this.startPosition;
	this.hidePosition;
	this.shoulPause = false;
	this.position = 0;
	this.tween = new TimelineMax({ paused: true, onStart: function () {
			this.setPosition();
		}.bind(this) });

	this.element.style.backgroundImage = "url('./pictures/preloader.gif')";

	this.newImage.onload = function () {
		// this.element.style.backgroundImage = "url('" + this.newImage.src + "')";
		this.element.style.backgroundColor = color;

		TweenMax.from(this.element, 0.5, { autoAlpha: 0, ease: Circ.easeOut });
		console.log('scene bg has loaded');
	}.bind(this);

	this.newImage.src = this.image;

	return this;
};

Scene.prototype.sceneTransition = function (position, playNextOne) {
	console.warn(position);
	this.tween.set(this.element, { left: position.width }).to(this.element, 1, { left: 0, ease: Power1.easeOut, onComplete: function onComplete() {
			console.warn('zcxxzcxzc');
		} }).to(this.element, 1, { left: -position.width, ease: Power1.easeOut, onStart: playNextOne, onComplete: function onComplete() {
			console.warn('almost finish');
		} }, '+=2');
};

Scene.prototype.setPosition = function () {
	this.elBoundings = document.getElementById('carousel').getBoundingClientRect();
	console.warn(this.elBoundings);
	return this.position = {
		right: this.elBoundings.right,
		width: this.elBoundings.width
	};
};

Scene.prototype.controls = function () {
	return {
		play: function (playNextOne) {
			this.sceneTransition(this.setPosition(), playNextOne);
			this.tween.play();
		}.bind(this),
		pause: function pause() {},
		kill: function kill() {
			this.tween.kill();
		}
	};
};

module.exports = Scene;

},{"../../config":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvY29uZmlnLmpzIiwicHVibGljL2pzL2FwcC5qcyIsInB1YmxpYy9qcy9jYXJvdXNlbC9jYXJvdXNlbC5qcyIsInB1YmxpYy9qcy9jYXJvdXNlbC9zY2VuZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsT0FBTyxPQUFQLEdBQWlCO0FBQ2IscUJBQWlCLENBREo7QUFFYixtQkFBZTtBQUZGLENBQWpCOzs7OztBQ0FBLE9BQU8sTUFBUCxHQUFnQixZQUFZO0FBQzNCLEtBQUksV0FBVyxRQUFRLHFCQUFSLENBQWY7QUFDQSxLQUFJLFFBQVEsUUFBUSxrQkFBUixDQUFaOztBQUVBLEtBQUksVUFBVSxzREFBZDtBQUNBLEtBQUksYUFBYSxJQUFJLFFBQUosQ0FBYSxPQUFiLEVBQXNCLE9BQXRCLENBQWpCOztBQUVBLEtBQUksYUFBYSw2TkFBakI7QUFDQSxLQUFJLGFBQWEsNEhBQWpCO0FBQ0EsS0FBSSxnQkFBZ0IsaUZBQXBCO0FBQ0EsS0FBSSxlQUFlLHdFQUFuQjtBQUNBLEtBQUksZUFBZSx3RUFBbkI7O0FBRUEsS0FBSSxRQUFRLElBQUksS0FBSixDQUFVLFVBQVYsRUFBcUIsU0FBckIsQ0FBWjtBQUNBLEtBQUksU0FBUyxJQUFJLEtBQUosQ0FBVSxVQUFWLEVBQXNCLFNBQXRCLENBQWI7QUFDQSxLQUFJLFNBQVMsSUFBSSxLQUFKLENBQVUsYUFBVixFQUF5QixTQUF6QixDQUFiO0FBQ0EsS0FBSSxTQUFTLElBQUksS0FBSixDQUFVLFlBQVYsRUFBd0IsU0FBeEIsQ0FBYjtBQUNBLEtBQUksU0FBUyxJQUFJLEtBQUosQ0FBVSxZQUFWLEVBQXdCLFNBQXhCLENBQWI7O0FBRUEsWUFBVyxXQUFYLENBQXVCLENBQUMsS0FBRCxFQUFPLE1BQVAsRUFBYyxNQUFkLEVBQXFCLE1BQXJCLEVBQTRCLE1BQTVCLENBQXZCO0FBRUEsQ0FyQkQ7Ozs7Ozs7QUNB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SEssQ0FHSixJQUhJLENBR0MsSUFIRCxDQURBO0FBS04sU0FBTyxpQkFBVyxDQUVqQixDQVBLO0FBUU4sUUFBTSxnQkFBVztBQUNoQixRQUFLLEtBQUwsQ0FBVyxJQUFYO0FBQ0E7QUFWSyxFQUFQO0FBWUEsQ0FiRDs7QUFlQSxPQUFPLE9BQVAsR0FBaUIsS0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgc2NlbmVUcmFuc2l0aW9uOiAxLFxuICAgIHNjZW5lRHVyYXRpb246IDIuNVxufSIsIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0dmFyIENhcm91c2VsID0gcmVxdWlyZSgnLi9jYXJvdXNlbC9jYXJvdXNlbCcpO1xyXG5cdHZhciBTY2VuZSA9IHJlcXVpcmUoJy4vY2Fyb3VzZWwvc2NlbmUnKTtcclxuXHJcblx0dmFyIGJnSW1hZ2UgPSAnaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS9KNmc1M0htMHJxNC9tYXhyZXNkZWZhdWx0LmpwZyc7XHJcblx0dmFyIENhcm91c2VsRWwgPSBuZXcgQ2Fyb3VzZWwoJ3NjZW5lJywgYmdJbWFnZSk7XHJcblxyXG5cdHZhciBzY2VuZU9uZUJHID0gJ2h0dHA6Ly93d3cuYmVudGxleW1vdG9ycy5jb20vY29udGVudC9kYW0vYmVudGxleS9NYXN0ZXIvTW9kZWxzL0hlcm8vUEFTVCUyME1PREVMUy9Db250aW5lbnRhbFNwclNwcnRzX0hlcm9fMTkyMHg2NzAuanBnL19qY3JfY29udGVudC9yZW5kaXRpb25zL2NxNWRhbS53ZWIuMTI4MC4xMjgwLmpwZWcuaW1hZ2VfZmlsZS4xMTE2LjM4OS5maWxlL2NxNWRhbS53ZWIuMTI4MC4xMjgwLmpwZyc7XHJcblx0dmFyIHNjZW5lVHdvQkcgPSAnaHR0cHM6Ly9pLmtpbmphLWltZy5jb20vZ2F3a2VyLW1lZGlhL2ltYWdlL3VwbG9hZC9zLS1xcDJGNnVQSy0tL2Nfc2NhbGUsZmxfcHJvZ3Jlc3NpdmUscV84MCx3XzgwMC9pbTR5bXJsenR2OWoxYmVma3BvYS5qcGcnO1xyXG5cdHZhciBzY3JlZW5UaHJlZUJHID0gJ2h0dHA6Ly93d3cuc3VwZXJjYXJzLm5ldC9ibG9nL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE2LzA1LzE5OTAtRmVycmFyaS1GNDAtNC5qcGcnO1xyXG5cdHZhciBzY3JlZW5Gb3VyQkcgPSAnaHR0cDovL3dvd3NsaWRlci5jb20vc2xpZGVycy9kZW1vLTc3L2RhdGExL2ltYWdlcy9maWVsZDE3NTk1OV8xOTIwLmpwZyc7XHJcblx0dmFyIHNjcmVlbkZpdmVCRyA9ICdodHRwOi8vd293c2xpZGVyLmNvbS9zbGlkZXJzL2RlbW8tNzcvZGF0YTEvaW1hZ2VzL2lkYWhvMjM5NjkxXzE5MjAuanBnJztcclxuXHJcblx0dmFyIHNjZW5lID0gbmV3IFNjZW5lKHNjZW5lT25lQkcsXCIjYWEwMGZmXCIpO1xyXG5cdHZhciBzY2VuZTIgPSBuZXcgU2NlbmUoc2NlbmVUd29CRywgXCIjZmZmZjAwXCIpO1xyXG5cdHZhciBzY2VuZTMgPSBuZXcgU2NlbmUoc2NyZWVuVGhyZWVCRywgXCIjZjBmZmYwXCIpO1xyXG5cdHZhciBzY2VuZTQgPSBuZXcgU2NlbmUoc2NyZWVuRm91ckJHLCBcIiNmMGFhZjBcIik7XHJcblx0dmFyIHNjZW5lNSA9IG5ldyBTY2VuZShzY3JlZW5GaXZlQkcsIFwiI2YwZmZhYVwiKTtcclxuXHJcblx0Q2Fyb3VzZWxFbC5hZGRFbGVtZW50cyhbc2NlbmUsc2NlbmUyLHNjZW5lMyxzY2VuZTQsc2NlbmU1XSk7XHJcblxyXG59IiwidmFyIENhcm91c2VsID0gZnVuY3Rpb24ocGFyZW50LCBiZ0ltYWdlKSB7XG5cdHRoaXMuY2Fyb3VzZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0dGhpcy5jYXJvdXNlbC5pZCA9ICdjYXJvdXNlbCc7XG5cblx0dGhpcy5lbGVtZW50cyA9IFtdO1xuXHR0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XG5cblx0dGhpcy5sb29wSW5kZXggPSAwO1xuXHR0aGlzLmxvb3BJbmRleENvcnJlY3Rpb24gPSAwO1xuXG5cdHRoaXMuYXJyb3dTdGF0ZSA9IGZhbHNlO1xuXHR0aGlzLnBsYXlDYXJvdXNlbCA9IG5ldyBUaW1lbGluZU1heCgpO1xuXG5cdHZhciBncmFuZFBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudCk7XG5cdGdyYW5kUGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY2Fyb3VzZWwpO1xuXG5cdHRoaXMuY3JlYXRlQXJyb3dzKCk7XG5cdHRoaXMuaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKXtcblxuXHR9LmJpbmQodGhpcyk7XG5cdHRoaXMuaW1hZ2Uuc3JjID0gYmdJbWFnZTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5hZGRFbGVtZW50cyA9IGZ1bmN0aW9uKGFycmF5KSB7XG5cdHZhciB0eXBlID0gdHlwZW9mIGFycmF5ID09PSAnb2JqZWN0JztcblxuXHRpZih0eXBlKSB7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdGFycmF5Lm1hcChmdW5jdGlvbihlbCkge1xuXHRcdFx0aWYodHlwZW9mIGVsID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRzZWxmLmFwcGVuZEVsZW1lbnQoZWwuZWxlbWVudClcblx0XHRcdH1cblxuXHRcdFx0c2VsZi5lbGVtZW50cy5wdXNoKGVsKTtcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR0aGlzLmVsZW1lbnRzLnB1c2goYXJyYXkpO1xuXHR9XG5cdHRoaXMuaW5pdFNjZW5lKCk7XG5cdHJldHVybiB0aGlzO1xufTtcblxuQ2Fyb3VzZWwucHJvdG90eXBlLmN1cnJldG5FbGVtZW50ID0gZnVuY3Rpb24oY3VzdG9tZUluZGV4KSB7XG5cdHZhciBpbmRleCA9ICBjdXN0b21lSW5kZXggIT09IHVuZGVmaW5lZCA/IGdldEN1c3RvbUluZGV4LmNhbGwodGhpcywgY3VzdG9tZUluZGV4KSA6IHVwZGF0ZUluZGV4LmNhbGwodGhpcyk7XG5cblx0ZnVuY3Rpb24gZ2V0Q3VzdG9tSW5kZXgocGFzc2VkSW5kZXgpIHtcblx0XHRyZXR1cm4gcGFzc2VkSW5kZXggJSB0aGlzLmVsZW1lbnRzLmxlbmd0aDtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUluZGV4KCkge1xuXHRcdHRoaXMubG9vcEluZGV4ID0gKHRoaXMubG9vcEluZGV4KSAlIHRoaXMuZWxlbWVudHMubGVuZ3RoO1xuXG5cdFx0cmV0dXJuIHRoaXMubG9vcEluZGV4O1xuXHR9XG5cblx0cmV0dXJuIHRoaXMuZWxlbWVudHNbIGluZGV4IF07XG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUubmV4dEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcblx0Y29uc29sZS5lcnJvcih0aGlzLmxvb3BJbmRleCk7XG5cdHRoaXMubG9vcEluZGV4Kys7XG5cdHJldHVybiB0aGlzLmN1cnJldG5FbGVtZW50KCk7XG59O1xuXG5DYXJvdXNlbC5wcm90b3R5cGUucHJldkVsZW1lbnQgPSBmdW5jdGlvbigpIHtcblx0dGhpcy5sb29wSW5kZXggKz0gdGhpcy5lbGVtZW50cy5sZW5ndGggLSAxO1xuXG5cdHJldHVybiB0aGlzLmN1cnJldG5FbGVtZW50KCk7XG59O1xuXG4vLyBDYXJvdXNlbC5wcm90b3R5cGUucmVtb3ZlRWxlbWVudHMgPSBmdW5jdGlvbihhcnJheSkge1xuLy8gXHRpZih0eXBlKSB7XG4vLyBcdFx0YXJyYXkubWFwKGZ1bmN0aW9uKGVsLCBpKSB7XG4vLyBcdFx0XHR0aGlzLmNhcm91c2VsLnJlbW92ZUNoaWxkKGVsKVxuLy8gXHRcdFx0dGhpcy5lbGVtZW50cy5zcGxpY2UoaSwgMSk7XG4vLyBcdFx0fSk7XG4vLyBcdH0gZWxzZSB7XG4vLyBcdFx0dGhpcy5lbGVtZW50cy5wdXNoKGFycmF5KTtcbi8vIFx0fVxuXG4vLyBcdHJldHVybiB0aGlzLmVsZW1lbnRzO1xuLy8gfVxuXG5DYXJvdXNlbC5wcm90b3R5cGUuY3JlYXRlQXJyb3dzID0gZnVuY3Rpb24oKSB7XG5cdHRoaXMubGVmdEFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdHRoaXMucmlnaHRBcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdHRoaXMubGVmdEFycm93LmlkID0gJ2xlZnRBcnJvdyc7XG5cdHRoaXMucmlnaHRBcnJvdy5pZCA9ICdyaWdodEFycm93JztcblxuXHR0aGlzLmxlZnRBcnJvdy5jbGFzc05hbWUgPSAnYXJyb3dzJztcblx0dGhpcy5yaWdodEFycm93LmNsYXNzTmFtZSA9ICdhcnJvd3MnO1xuXG5cdHRoaXMuYXBwZW5kRWxlbWVudCh0aGlzLmxlZnRBcnJvdyk7XG5cdHRoaXMuYXBwZW5kRWxlbWVudCh0aGlzLnJpZ2h0QXJyb3cpO1xuXG5cdHRoaXMuYXJyb3dzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXJyb3dzJyk7XG5cblxuXHR0aGlzLmxlZnRBcnJvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5wbGF5TmV4dEVsZW1lbnQuYmluZCh0aGlzLCB0cnVlKSlcblx0dGhpcy5yaWdodEFycm93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnBsYXlQcmV2RWxlbWVudC5iaW5kKHRoaXMpKVxuXG5cdHRoaXMuY2Fyb3VzZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5hcnJvd3NTdGF0ZS5iaW5kKHRoaXMsIHRydWUpKTtcblx0dGhpcy5jYXJvdXNlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuYXJyb3dzU3RhdGUuYmluZCh0aGlzLCBmYWxzZSkpO1xufTtcblxuQ2Fyb3VzZWwucHJvdG90eXBlLmhpZGVQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgY2Fyb3VzZWxCb3VuZHMgPSB0aGlzLmNhcm91c2VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cdHJldHVybiBjYXJvdXNlbEJvdW5kcy53aWR0aDtcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5hcnJvd3NTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG5cdHN3aXRjaCAoc3RhdGUpIHtcblx0XHRjYXNlIHRydWU6XG5cdFx0XHR0aGlzLmFycm93c1swXS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG5cdFx0XHR0aGlzLmFycm93c1sxXS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIGZhbHNlOlxuXHRcdFx0dGhpcy5hcnJvd3NbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdHRoaXMuYXJyb3dzWzFdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0YnJlYWs7XG5cdH1cbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5hcHBlbmRFbGVtZW50ID0gZnVuY3Rpb24oY2hpbGQpIHtcblx0dGhpcy5jaGlsZCA9IGNoaWxkO1xuXHR0aGlzLmNhcm91c2VsLmFwcGVuZENoaWxkKHRoaXMuY2hpbGQpO1xufTtcblxuXG5DYXJvdXNlbC5wcm90b3R5cGUuZXZlbnRFbW1pdGVyID0gZnVuY3Rpb24oc3ViamVjdCwgZXZlbnQsIGNhbGxiYWNrKSB7XG5cdHRoaXMuc3ViamVjdCA9IHN1YmplY3Q7XG5cdHRoaXMuZXZlbnQgPSBldmVudDtcblx0dGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuXG5cdHRoaXMuc3ViamVjdC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnQsIHRoaXMuY2FsbGJhY2spO1xufTtcblxuQ2Fyb3VzZWwucHJvdG90eXBlLmFuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLm5leHRBbmltYXRpb25FbGVtZW50ID0gdGhpcy5uZXh0RWxlbWVudCgpO1xuXHR0aGlzLm5leHRBbmltYXRpb25FbGVtZW50LmNvbnRyb2xzKCkucGxheSh0aGlzLmFuaW1hdGlvbi5iaW5kKHRoaXMpKVxufTtcblxuQ2Fyb3VzZWwucHJvdG90eXBlLmluaXRTY2VuZSA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgcG9zaXRpb24gPSB0aGlzLmhpZGVQb3NpdGlvbigpO1xuXHR0aGlzLmN1cnJlbnRBbmltYXRpb25FbGVtZW50ID0gdGhpcy5jdXJyZXRuRWxlbWVudCgpO1xuXHRmdW5jdGlvbiBjYigpIHtcblx0XHRjb25zb2xlLndhcm4oJ3BsYXkgbmV4dCBzY2VuZScpO1xuXHR9XG5cdHRoaXMuY3VycmVudEFuaW1hdGlvbkVsZW1lbnQuY29udHJvbHMoKS5wbGF5KHRoaXMuYW5pbWF0aW9uLmJpbmQodGhpcykpO1xufTtcblxuQ2Fyb3VzZWwucHJvdG90eXBlLnBsYXlOZXh0RWxlbWVudCA9IGZ1bmN0aW9uKHR3ZWVuKSB7XG5cdHZhciBjdXJyZW50ID0gdGhpcy5jdXJyZXRuRWxlbWVudCgpLmVsZW1lbnQ7XG5cdHZhciBuZXh0ID0gdGhpcy5uZXh0RWxlbWVudCgpLmVsZW1lbnQ7XG5cdHZhciBuZXh0RWxQb3MgPSB0aGlzLmhpZGVQb3NpdGlvbigpO1xuXHR2YXIgdHdlZW5OZXh0RWxlbWVudCA9IG5ldyBUaW1lbGluZU1heCgpO1xuXG5cdHR3ZWVuTmV4dEVsZW1lbnRcblx0XHQuc2V0KG5leHQsIHtsZWZ0OiBuZXh0RWxQb3N9KVxuXHRcdC50byhjdXJyZW50LCAxLCB7bGVmdDogLW5leHRFbFBvcywgZWFzZTogUG93ZXIyLmVhc2VPdXR9KVxuXHRcdC50byhuZXh0LCAxLCB7bGVmdDogMCwgZWFzZTogUG93ZXIyLmVhc2VPdXR9LCAnLT0xJylcbn07XG5cbkNhcm91c2VsLnByb3RvdHlwZS5wbGF5UHJldkVsZW1lbnQgPSBmdW5jdGlvbigpIHtcblx0dmFyIGN1cnJlbnQgPSB0aGlzLmN1cnJldG5FbGVtZW50KCkuZWxlbWVudDtcblx0dmFyIHByZXYgPSB0aGlzLnByZXZFbGVtZW50KCkuZWxlbWVudDtcblx0dmFyIGN1cnJQb3MgPSB0aGlzLmhpZGVQb3NpdGlvbigpO1xuXHR2YXIgdHdlZW5QcmV2RWxlbWVudCA9IG5ldyBUaW1lbGluZU1heCgpO1xuXG5cdHR3ZWVuUHJldkVsZW1lbnRcblx0XHQuc2V0KHByZXYsIHtsZWZ0OiAtY3VyclBvcywgZWFzZTogUG93ZXIyLmVhc2VPdXR9KVxuXHRcdC50byhjdXJyZW50LCAwLjYsIHtsZWZ0OiBjdXJyUG9zLCBlYXNlOiBQb3dlcjIuZWFzZU91dH0pXG5cdFx0LnRvKHByZXYsIDAuNiwge2xlZnQ6IDAsIGVhc2U6IFBvd2VyMi5lYXNlT3V0fSlcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2Fyb3VzZWw7XG4iLCJ2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vLi4vY29uZmlnJyk7XG5cbnZhciBTY2VuZSA9IGZ1bmN0aW9uKGltYWdlLCBjb2xvcikge1xuXG5cdHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHR0aGlzLm5ld0ltYWdlID0gbmV3IEltYWdlKCk7XG5cblx0dGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9ICdjYXJvdXNlbFNjZW5lJztcblx0dGhpcy5pbWFnZSA9IGltYWdlO1xuXG5cdHRoaXMuc3RhcnRQb3NpdGlvbjtcblx0dGhpcy5oaWRlUG9zaXRpb247XG5cdHRoaXMuc2hvdWxQYXVzZSA9IGZhbHNlO1xuXHR0aGlzLnBvc2l0aW9uID0gMDtcblx0dGhpcy50d2VlbiA9IG5ldyBUaW1lbGluZU1heCh7cGF1c2VkOiB0cnVlLCBvblN0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnNldFBvc2l0aW9uKCk7XG5cdH0uYmluZCh0aGlzKX0pO1xuXG5cdHRoaXMuZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnLi9waWN0dXJlcy9wcmVsb2FkZXIuZ2lmJylcIjtcblxuXHR0aGlzLm5ld0ltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHRoaXMuZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIgKyB0aGlzLm5ld0ltYWdlLnNyYyArIFwiJylcIjtcblx0XHR0aGlzLmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG5cblx0XHRUd2Vlbk1heC5mcm9tKHRoaXMuZWxlbWVudCwgMC41LHthdXRvQWxwaGE6IDAsIGVhc2U6IENpcmMuZWFzZU91dH0pXG5cdFx0Y29uc29sZS5sb2coJ3NjZW5lIGJnIGhhcyBsb2FkZWQnKTtcblx0fS5iaW5kKHRoaXMpO1xuXG5cdHRoaXMubmV3SW1hZ2Uuc3JjID0gdGhpcy5pbWFnZTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblNjZW5lLnByb3RvdHlwZS5zY2VuZVRyYW5zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbiwgcGxheU5leHRPbmUpIHtcblx0XHRjb25zb2xlLndhcm4ocG9zaXRpb24pO1xuXHRcdHRoaXMudHdlZW5cblx0XHRcdC5zZXQodGhpcy5lbGVtZW50LCB7bGVmdDogcG9zaXRpb24ud2lkdGh9KVxuXHRcdFx0LnRvKHRoaXMuZWxlbWVudCwgMSwge2xlZnQ6IDAsIGVhc2U6IFBvd2VyMS5lYXNlT3V0LCBvbkNvbXBsZXRlOmZ1bmN0aW9uKCkge2NvbnNvbGUud2FybignemN4eHpjeHpjJyk7fSB9KVxuXHRcdFx0LnRvKHRoaXMuZWxlbWVudCwgMSwge2xlZnQ6ICAtcG9zaXRpb24ud2lkdGgsIGVhc2U6IFBvd2VyMS5lYXNlT3V0LCBvblN0YXJ0OiBwbGF5TmV4dE9uZSwgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybignYWxtb3N0IGZpbmlzaCcpO1xuXHRcdFx0fX0sICcrPTInKVxufTtcblxuU2NlbmUucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG5cdHRoaXMuZWxCb3VuZGluZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2Fyb3VzZWwnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0Y29uc29sZS53YXJuKHRoaXMuZWxCb3VuZGluZ3MpO1xuXHRyZXR1cm4gdGhpcy5wb3NpdGlvbiA9IHtcblx0XHRyaWdodDogdGhpcy5lbEJvdW5kaW5ncy5yaWdodCxcblx0XHR3aWR0aDogdGhpcy5lbEJvdW5kaW5ncy53aWR0aFxuXHR9O1xufTtcblxuU2NlbmUucHJvdG90eXBlLmNvbnRyb2xzID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG5cdFx0cGxheTogZnVuY3Rpb24ocGxheU5leHRPbmUpIHtcblx0XHRcdHRoaXMuc2NlbmVUcmFuc2l0aW9uKHRoaXMuc2V0UG9zaXRpb24oKSwgcGxheU5leHRPbmUpO1xuXHRcdFx0dGhpcy50d2Vlbi5wbGF5KCk7XG5cdFx0fS5iaW5kKHRoaXMpLFxuXHRcdHBhdXNlOiBmdW5jdGlvbigpIHtcblxuXHRcdH0sXG5cdFx0a2lsbDogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnR3ZWVuLmtpbGwoKTtcblx0XHR9XG5cdH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjZW5lOyJdfQ==
